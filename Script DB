CREATE TABLE Users (
  user_id int Not Null IDENTITY (1, 1),
  user_name nvarchar(50) Not Null,
  user_email nvarchar(50) Not Null,
  user_password nvarchar(20) Not Null
  PRIMARY KEY (user_id)
);

CREATE TABLE Allergens (
  allergen_id int Not Null IDENTITY (1, 1), 
  allergen_name nvarchar(50) Not Null,
  allergen_photo varbinary(MAX) Null,
  allergen_info nvarchar(150) NULL,
  PRIMARY KEY (allergen_id)
);

CREATE TABLE UserAllergens (
  user_allergen_id int Not Null IDENTITY (1, 1),
  user_id int Not Null REFERENCES Users(user_id) ON DELETE CASCADE,
  allergen_id int Not Null REFERENCES Allergens(allergen_id) ON DELETE CASCADE,
  PRIMARY KEY (user_allergen_id)
);


CREATE TABLE Notes (
  note_id int Not Null IDENTITY (1, 1),
  note_name nvarchar(50) Not Null,
  note_text nvarchar(300) NULL,
  user_id int Not Null REFERENCES Users(user_id) ON DELETE CASCADE,
  PRIMARY KEY (note_id)
);

CREATE TABLE Admins (
  admin_id int Not Null IDENTITY (1, 1),
  admin_email nvarchar(50) Not Null,
  admin_password nvarchar(20) Null,
  PRIMARY KEY (admin_id)
);

CREATE TABLE Doctors (
  doctor_id int Not Null IDENTITY (1, 1),
  doctor_name nvarchar(50) Not Null,
  doctor_email nvarchar(50) Not Null,
  doctor_password nvarchar(20) Not Null,
  doctor_IBAN nvarchar(35) Null,
  doctor_photo varbinary(MAX) Null,
  doctor_documents varbinary(MAX) Null,
  doctor_status bit not null
  PRIMARY KEY (doctor_id)
);

CREATE TABLE Points (
  point_id int not null IDENTITY (1,1),
  point_name nvarchar(50) Not Null,
  point_photo varbinary(MAX) Null,
  point_info nvarchar(50) Not Null,
  point_date date Not Null,
  point_status bit Not Null,
  point_coordinates nvarchar(50) Not Null,
  allergen_id int Not NULL REFERENCES Allergens(allergen_id) ON DELETE CASCADE,
  PRIMARY KEY (point_id)
);

CREATE TABLE Consultations (
  consultation_id int not null IDENTITY (1,1),
  consultation_date date Not Null,
  consultation_time time Not Null,
  user_id int Not NULL REFERENCES Users(user_id) ON DELETE CASCADE,
  doctor_id int Not NULL REFERENCES Doctors(doctor_id) ON DELETE CASCADE,
  PRIMARY KEY (consultation_id)
);
